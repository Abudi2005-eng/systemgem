# ูุธุงู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู ูู ุงููุณุคูู ุนู ุชุชุจุน ุฏุฎูู ูุฎุฑูุฌ ุงูุฃุนุถุงุก ูู ุงููุงุฏู ุงูุฑูุงุถู. ูููุฑ ูุฐุง ุงููุธุงู ุขููุฉ ุฏูููุฉ ูุชุณุฌูู ููุช ุงูุญุถูุฑ ูุงูุงูุตุฑุงูุ ูุน ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู ูุนุฏุฏ ุงูุญุตุต ุงููุชุจููุฉุ ุจุงูุฅุถุงูุฉ ุฅูู ุชูููุฑ ุฅุญุตุงุฆูุงุช ูุชูุงุฑูุฑ ููุตูุฉ ุนู ุฃููุงุท ุงูุญุถูุฑ.

## ๐ ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ

### 1. ุชุณุฌูู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู
- ุชุณุฌูู ุญุถูุฑ ุงูุนุถู ุนูุฏ ุงูุฏุฎูู
- ุชุณุฌูู ุงูุตุฑุงู ุงูุนุถู ุนูุฏ ุงูุฎุฑูุฌ
- ุญุณุงุจ ูุฏุฉ ุงูุชูุฑูู
- ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู

### 2. ุงูุชุญูู ูู ุงูุตูุงุญูุฉ
- ุงูุชุญูู ูู ูุฌูุฏ ุงุดุชุฑุงู ูุดุท
- ุงูุชุญูู ูู ุนุฏู ุงูุชูุงุก ุงูุงุดุชุฑุงู
- ุงูุชุญูู ูู ูุฌูุฏ ุญุตุต ูุชุจููุฉ (ุฅุฐุง ูุงู ุงูุงุดุชุฑุงู ูุญุฏูุฏ ุงูุญุตุต)
- ุงูุชุญูู ูู ุงููุชุฑุฉ ุงููุณููุญ ุจูุง (ุฑุฌุงู/ุณูุฏุงุช)

### 3. ุฅุฏุงุฑุฉ ุงูุญุตุต
- ุฎุตู ุญุตุฉ ุนูุฏ ุชุณุฌูู ุงูุญุถูุฑ (ุฅุฐุง ูุงู ุงูุงุดุชุฑุงู ูุญุฏูุฏ ุงูุญุตุต)
- ุนุฑุถ ุนุฏุฏ ุงูุญุตุต ุงููุชุจููุฉ
- ุชูุจูู ุนูุฏ ุงูุชุฑุงุจ ููุงุฏ ุงูุญุตุต

### 4. ูุชุงุจุนุฉ ุงูุญุถูุฑ
- ุนุฑุถ ุณุฌู ุงูุญุถูุฑ ููู ุนุถู
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุญุถูุฑ
- ุชุญููู ุฃููุงุท ุงูุญุถูุฑ

## ๐๏ธ ูููุฐุฌ ุจูุงูุงุช ุงูุญุถูุฑ

```python
class Attendance(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    member_id = db.Column(db.Integer, db.ForeignKey('member.id'), nullable=False)
    subscription_id = db.Column(db.Integer, db.ForeignKey('subscription.id'), nullable=False)
    check_in_time = db.Column(db.DateTime, default=datetime.utcnow)
    check_out_time = db.Column(db.DateTime, nullable=True)
    duration_minutes = db.Column(db.Integer, nullable=True)
    notes = db.Column(db.Text)
    created_by = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=True)
```

## ๐ ุงูุนูุงูุงุช ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู

### 1. ุงูุนูุงูุฉ ูุน ูุธุงู ุงูุฃุนุถุงุก
- ูู ุชุณุฌูู ุญุถูุฑ ููุชูู ูุนุถู ูุงุญุฏ
- ูููู ููุนุถู ุฃู ูููู ูู ุนุฏุฉ ุชุณุฌููุงุช ุญุถูุฑ
- ูุชู ุฑุจุท ุชุณุฌูู ุงูุญุถูุฑ ุจุงูุนุถู ูู ุฎูุงู ูุนุฑู ุงูุนุถู

### 2. ุงูุนูุงูุฉ ูุน ูุธุงู ุงูุงุดุชุฑุงูุงุช
- ูู ุชุณุฌูู ุญุถูุฑ ูุฑุชุจุท ุจุงุดุชุฑุงู ูุดุท
- ูุชู ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู ุนูุฏ ุชุณุฌูู ุงูุญุถูุฑ
- ูุชู ุฎุตู ุญุตุฉ ูู ุงูุงุดุชุฑุงู ุนูุฏ ุชุณุฌูู ุงูุญุถูุฑ (ุฅุฐุง ูุงู ุงูุงุดุชุฑุงู ูุญุฏูุฏ ุงูุญุตุต)

### 3. ุงูุนูุงูุฉ ูุน ูุธุงู ุงูุชูุงุฑูุฑ
- ุชูููุฑ ุจูุงูุงุช ุงูุญุถูุฑ ููุชูุงุฑูุฑ
- ุฅูุดุงุก ุชูุงุฑูุฑ ููุตูุฉ ุนู ุฃููุงุท ุงูุญุถูุฑ
- ุชุญููู ุจูุงูุงุช ุงูุญุถูุฑ ูุงุชุฎุงุฐ ูุฑุงุฑุงุช ุฅุฏุงุฑูุฉ

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ

### 1. ุฅุญุตุงุฆูุงุช ุงูุญุถูุฑ
- ุนุฏุฏ ูุฑุงุช ุงูุญุถูุฑ ููู ุนุถู
- ูุชูุณุท ูุฏุฉ ุงูุชูุฑูู
- ุฃููุงุช ุงูุฐุฑูุฉ ูู ุงููุงุฏู
- ูุนุฏู ุงูุญุถูุฑ ุงููููู/ุงูุฃุณุจูุนู/ุงูุดูุฑู

### 2. ุชูุงุฑูุฑ ุงูุญุถูุฑ
- ุชูุฑูุฑ ุงูุญุถูุฑ ุงููููู
- ุชูุฑูุฑ ุงูุญุถูุฑ ุงูุฃุณุจูุนู
- ุชูุฑูุฑ ุงูุญุถูุฑ ุงูุดูุฑู
- ุชูุฑูุฑ ุงูุญุถูุฑ ุญุณุจ ุงููุชุฑุฉ (ุตุจุงุญู/ูุณุงุฆู)

## ๐ฅ๏ธ ูุงุฌูุงุช ุงููุณุชุฎุฏู

### 1. ุตูุญุฉ ุชุณุฌูู ุงูุญุถูุฑ
- ูููุฐุฌ ูุฅุฏุฎุงู ููุฏ ุงูุนุถู ุฃู ุงูุจุญุซ ุนู ุงูุนุถู
- ุนุฑุถ ุจูุงูุงุช ุงูุนุถู ูุงูุงุดุชุฑุงู
- ุฒุฑ ูุชุณุฌูู ุงูุญุถูุฑ
- ุนุฑุถ ุฑุณุงูุฉ ุชุฃููุฏ ุฃู ุฎุทุฃ

### 2. ุตูุญุฉ ุชุณุฌูู ุงูุงูุตุฑุงู
- ุนุฑุถ ูุงุฆูุฉ ุงูุฃุนุถุงุก ุงูููุฌูุฏูู ุญุงูููุง ูู ุงููุงุฏู
- ุฒุฑ ูุชุณุฌูู ุงูุงูุตุฑุงู
- ุนุฑุถ ูุฏุฉ ุงูุชูุฑูู

### 3. ุตูุญุฉ ุณุฌู ุงูุญุถูุฑ
- ุนุฑุถ ุณุฌู ุงูุญุถูุฑ ูุน ุฅููุงููุฉ ุงูุชุตููุฉ ูุงููุฑุฒ
- ุฎูุงุฑุงุช ููุจุญุซ ูู ุณุฌู ุงูุญุถูุฑ
- ุฅููุงููุฉ ุชุตุฏูุฑ ุณุฌู ุงูุญุถูุฑ

### 4. ููุญุฉ ูุนูููุงุช ุงูุญุถูุฑ
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุญุถูุฑ
- ุนุฑุถ ุฃููุงุช ุงูุฐุฑูุฉ
- ุนุฑุถ ูุนุฏู ุงูุญุถูุฑ

## ๐๏ธ ุงูุฎุฏูุงุช ูุงููุธุงุฆู ุงููุชูุฏูุฉ

### 1. ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู

```python
def can_check_in(member):
    """ุงูุชุญูู ูู ุฅููุงููุฉ ุชุณุฌูู ุงูุญุถูุฑ ููุนุถู"""
    # ุงูุชุญูู ูู ูุฌูุฏ ุงุดุชุฑุงู ูุดุท
    active_subscription = member.get_active_subscription()
    if not active_subscription:
        return False, "ูุง ููุฌุฏ ุงุดุชุฑุงู ูุดุท"
    
    # ุงูุชุญูู ูู ุนุฏู ุงูุชูุงุก ุงูุงุดุชุฑุงู
    if active_subscription.end_date < date.today():
        return False, "ุงูุงุดุชุฑุงู ููุชูู"
    
    # ุงูุชุญูู ูู ูุฌูุฏ ุญุตุต ูุชุจููุฉ
    if active_subscription.remaining_sessions is not None and active_subscription.remaining_sessions <= 0:
        return False, "ูุง ุชูุฌุฏ ุญุตุต ูุชุจููุฉ"
    
    # ุงูุชุญูู ูู ุงููุชุฑุฉ ุงููุณููุญ ุจูุง
    current_time = datetime.now().time()
    if active_subscription.plan.time_restriction == 'men':
        # ุงูุชุญูู ูู ูุชุฑุฉ ุงูุฑุฌุงู
        pass
    elif active_subscription.plan.time_restriction == 'women':
        # ุงูุชุญูู ูู ูุชุฑุฉ ุงูุณูุฏุงุช
        pass
    
    return True, "ูููู ุชุณุฌูู ุงูุญุถูุฑ"
```

### 2. ุชุณุฌูู ุงูุญุถูุฑ

```python
def check_in(member):
    """ุชุณุฌูู ุญุถูุฑ ุงูุนุถู"""
    # ุงูุชุญูู ูู ุฅููุงููุฉ ุชุณุฌูู ุงูุญุถูุฑ
    can_check, message = can_check_in(member)
    if not can_check:
        return False, message
    
    # ุงูุญุตูู ุนูู ุงูุงุดุชุฑุงู ุงููุดุท
    active_subscription = member.get_active_subscription()
    
    # ุฅูุดุงุก ุณุฌู ุญุถูุฑ ุฌุฏูุฏ
    attendance = Attendance(
        member_id=member.id,
        subscription_id=active_subscription.id,
        check_in_time=datetime.utcnow()
    )
    
    # ุฎุตู ุญุตุฉ ูู ุงูุงุดุชุฑุงู ุฅุฐุง ูุงู ูุญุฏูุฏ ุงูุญุตุต
    if active_subscription.remaining_sessions is not None:
        active_subscription.remaining_sessions -= 1
    
    # ุญูุธ ุงูุชุบููุฑุงุช
    db.session.add(attendance)
    db.session.commit()
    
    return True, "ุชู ุชุณุฌูู ุงูุญุถูุฑ ุจูุฌุงุญ", attendance
```

### 3. ุชุณุฌูู ุงูุงูุตุฑุงู

```python
def check_out(attendance):
    """ุชุณุฌูู ุงูุตุฑุงู ุงูุนุถู"""
    # ุงูุชุญูู ูู ุนุฏู ุชุณุฌูู ุงูุงูุตุฑุงู ูุณุจููุง
    if attendance.check_out_time is not None:
        return False, "ุชู ุชุณุฌูู ุงูุงูุตุฑุงู ูุณุจููุง"
    
    # ุชุณุฌูู ููุช ุงูุงูุตุฑุงู
    attendance.check_out_time = datetime.utcnow()
    
    # ุญุณุงุจ ูุฏุฉ ุงูุชูุฑูู
    duration = attendance.check_out_time - attendance.check_in_time
    attendance.duration_minutes = int(duration.total_seconds() / 60)
    
    # ุญูุธ ุงูุชุบููุฑุงุช
    db.session.commit()
    
    return True, "ุชู ุชุณุฌูู ุงูุงูุตุฑุงู ุจูุฌุงุญ", attendance
```

## ๐ฑ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

- ูุงุฌูุฉ ูุณุชุฎุฏู ุณููุฉ ุงูุงุณุชุฎุฏุงู
- ุนูููุฉ ุชุณุฌูู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู ุณุฑูุนุฉ ูุณูุณุฉ
- ุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ ููุชุฃููุฏ ุฃู ุงูุฎุทุฃ
- ุนุฑุถ ูุนูููุงุช ุงูุนุถู ูุงูุงุดุชุฑุงู ุจุดูู ูุงุถุญ

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

- ุชุญุฏูุฏ ุตูุงุญูุงุช ุชุณุฌูู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู
- ุชุณุฌูู ุงููุณุชุฎุฏู ุงูุฐู ูุงู ุจุชุณุฌูู ุงูุญุถูุฑ
- ุญูุงูุฉ ุจูุงูุงุช ุงูุญุถูุฑ ูู ุงูุชุนุฏูู ุบูุฑ ุงููุตุฑุญ ุจู
- ุชุณุฌูู ุงูุชุบููุฑุงุช ุนูู ุณุฌูุงุช ุงูุญุถูุฑ

## ๐ ููุฒุงุช ูุชูุฏูุฉ

### 1. ุชุณุฌูู ุงูุญุถูุฑ ุงูุชููุงุฆู
- ุงุณุชุฎุฏุงู ุจุทุงูุงุช RFID ูุชุณุฌูู ุงูุญุถูุฑ
- ุงุณุชุฎุฏุงู ุชุทุจูู ุงููุงุชู ูุชุณุฌูู ุงูุญุถูุฑ
- ุงุณุชุฎุฏุงู ุจุตูุฉ ุงูุฅุตุจุน ุฃู ุจุตูุฉ ุงููุฌู

### 2. ุชูุจููุงุช ุงูุญุถูุฑ
- ุฅุฑุณุงู ุชูุจูู ููุนุถู ุนูุฏ ุชุณุฌูู ุงูุญุถูุฑ
- ุฅุฑุณุงู ุชูุจูู ููุนุถู ุนูุฏ ุชุณุฌูู ุงูุงูุตุฑุงู
- ุฅุฑุณุงู ุชูุจูู ุนูุฏ ุงูุชุฑุงุจ ููุงุฏ ุงูุญุตุต

### 3. ุชุญููู ุฃููุงุท ุงูุญุถูุฑ
- ุชุญููู ุฃููุงุช ุงูุญุถูุฑ ุงูููุถูุฉ ููู ุนุถู
- ุชุญููู ูุฏุฉ ุงูุชูุฑูู ููู ุนุถู
- ุชูุฏูู ุชูุตูุงุช ุจูุงุกู ุนูู ุฃููุงุท ุงูุญุถูุฑ

## ๐ก ุฃูุถู ุงูููุงุฑุณุงุช

- ุชุจุณูุท ุนูููุฉ ุชุณุฌูู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู
- ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู ูุจู ุชุณุฌูู ุงูุญุถูุฑ
- ุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ ููุชุฃููุฏ ุฃู ุงูุฎุทุฃ
- ุงูุงุญุชูุงุธ ุจุณุฌู ูุงูู ููุญุถูุฑ ูุงูุงูุตุฑุงู
- ุงุณุชุฎุฏุงู ุงูุชูููููุฌูุง ูุชุณููู ุนูููุฉ ุชุณุฌูู ุงูุญุถูุฑ