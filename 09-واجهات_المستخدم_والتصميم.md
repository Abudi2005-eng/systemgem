# واجهات المستخدم والتصميم

## 🎯 نظرة عامة

يتميز نظام إدارة النادي الرياضي بواجهات مستخدم متطورة ومصممة بعناية لتوفير تجربة مستخدم سلسة وفعالة. تم تصميم الواجهات بأسلوب حديث وجذاب مع التركيز على سهولة الاستخدام والوظائف المتقدمة. يدعم النظام اللغة العربية بشكل كامل مع إمكانية التبديل بين الاتجاه من اليمين إلى اليسار (RTL) واليسار إلى اليمين (LTR).

## 📋 المكونات الرئيسية للواجهة

### 1. لوحة التحكم الرئيسية (Dashboard)
- عرض المؤشرات الرئيسية (KPIs)
- رسوم بيانية وإحصائيات
- قائمة المهام والتنبيهات
- روابط سريعة للوظائف الأكثر استخدامًا

### 2. القائمة الجانبية (Sidebar)
- التنقل بين أقسام النظام المختلفة
- عرض معلومات المستخدم الحالي
- إمكانية طي وتوسيع القائمة
- تمييز القسم النشط

### 3. شريط التنقل العلوي (Navbar)
- زر البحث السريع
- التنبيهات والإشعارات
- إعدادات المستخدم
- زر تسجيل الخروج

### 4. نماذج الإدخال (Forms)
- نماذج إضافة وتعديل البيانات
- التحقق من صحة المدخلات
- رسائل الخطأ والتنبيهات
- أزرار الحفظ والإلغاء

### 5. الجداول وقوائم البيانات (Tables & Lists)
- عرض البيانات في جداول قابلة للفرز والتصفية
- خيارات البحث والتصفية
- التنقل بين الصفحات
- خيارات التصدير والطباعة

## 🎨 التصميم والألوان

### 1. السمات (Themes)
- السمة الفاتحة (Light Theme)
- السمة الداكنة (Dark Theme)
- إمكانية تخصيص الألوان

### 2. نظام الألوان
- اللون الرئيسي: #3498db (أزرق)
- اللون الثانوي: #2ecc71 (أخضر)
- لون التنبيه: #e74c3c (أحمر)
- لون التحذير: #f39c12 (برتقالي)
- لون النجاح: #27ae60 (أخضر داكن)
- ألوان محايدة: تدرجات الرمادي من #f5f5f5 إلى #333333

### 3. الخطوط (Typography)
- الخط الرئيسي: Cairo للواجهة العربية
- الخط البديل: Roboto للواجهة الإنجليزية
- أحجام الخطوط متوافقة مع معايير الوصول

### 4. الأيقونات والرموز
- مجموعة أيقونات Font Awesome
- أيقونات مخصصة للنظام
- رموز تعبيرية لتحسين تجربة المستخدم

## 🖥️ الصفحات الرئيسية

### 1. صفحة تسجيل الدخول

```html
<!-- نموذج تسجيل الدخول -->
<div class="login-container">
    <div class="login-logo">
        <img src="/static/images/logo.png" alt="Gymawy Logo">
    </div>
    <h2 class="login-title">تسجيل الدخول</h2>
    <form method="POST" action="/login" class="login-form">
        <div class="form-group">
            <label for="username">اسم المستخدم</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="form-group">
            <label for="password">كلمة المرور</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="form-group remember-me">
            <input type="checkbox" id="remember" name="remember">
            <label for="remember">تذكرني</label>
        </div>
        <button type="submit" class="btn btn-primary btn-block">دخول</button>
    </form>
    <div class="login-footer">
        <a href="/forgot-password">نسيت كلمة المرور؟</a>
    </div>
</div>
```

### 2. لوحة التحكم الرئيسية

```html
<!-- لوحة التحكم الرئيسية -->
<div class="dashboard-container">
    <!-- صف المؤشرات الرئيسية -->
    <div class="kpi-row">
        <div class="kpi-card">
            <div class="kpi-icon"><i class="fas fa-users"></i></div>
            <div class="kpi-content">
                <h3>إجمالي الأعضاء</h3>
                <div class="kpi-value">{{ total_members }}</div>
                <div class="kpi-change positive">+{{ new_members_today }} اليوم</div>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon"><i class="fas fa-id-card"></i></div>
            <div class="kpi-content">
                <h3>الاشتراكات النشطة</h3>
                <div class="kpi-value">{{ active_subscriptions }}</div>
                <div class="kpi-change negative">{{ expiring_soon }} تنتهي قريبًا</div>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon"><i class="fas fa-money-bill"></i></div>
            <div class="kpi-content">
                <h3>إيرادات اليوم</h3>
                <div class="kpi-value">{{ today_revenue }} ج.م</div>
                <div class="kpi-change positive">{{ revenue_change }}% مقارنة بالأمس</div>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon"><i class="fas fa-clock"></i></div>
            <div class="kpi-content">
                <h3>الحضور اليوم</h3>
                <div class="kpi-value">{{ today_attendance }}</div>
                <div class="kpi-change neutral">{{ current_gym_attendance }} متواجدين حاليًا</div>
            </div>
        </div>
    </div>
    
    <!-- صف الرسوم البيانية -->
    <div class="charts-row">
        <div class="chart-card">
            <h3>إحصائيات الإيرادات</h3>
            <canvas id="revenueChart"></canvas>
        </div>
        
        <div class="chart-card">
            <h3>إحصائيات الحضور</h3>
            <canvas id="attendanceChart"></canvas>
        </div>
    </div>
    
    <!-- صف الجداول -->
    <div class="tables-row">
        <div class="table-card">
            <h3>آخر عمليات تسجيل الدخول</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>الوقت</th>
                        <th>العضو</th>
                        <th>نوع الاشتراك</th>
                        <th>الحالة</th>
                    </tr>
                </thead>
                <tbody>
                    {% for check_in in recent_check_ins %}
                    <tr>
                        <td>{{ check_in.time }}</td>
                        <td>{{ check_in.member_name }}</td>
                        <td>{{ check_in.subscription_type }}</td>
                        <td><span class="status {{ check_in.status }}">{{ check_in.status_text }}</span></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <a href="/attendance" class="view-all">عرض الكل</a>
        </div>
        
        <div class="table-card">
            <h3>الاشتراكات التي تنتهي قريبًا</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>العضو</th>
                        <th>نوع الاشتراك</th>
                        <th>تاريخ الانتهاء</th>
                        <th>الإجراء</th>
                    </tr>
                </thead>
                <tbody>
                    {% for subscription in expiring_subscriptions %}
                    <tr>
                        <td>{{ subscription.member_name }}</td>
                        <td>{{ subscription.plan_name }}</td>
                        <td>{{ subscription.end_date }}</td>
                        <td><a href="/subscriptions/{{ subscription.id }}/renew" class="btn btn-sm btn-primary">تجديد</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <a href="/subscriptions/expiring" class="view-all">عرض الكل</a>
        </div>
    </div>
</div>

<script>
    // رسم الرسوم البيانية باستخدام Chart.js
    document.addEventListener('DOMContentLoaded', function() {
        // رسم بياني للإيرادات
        var revenueCtx = document.getElementById('revenueChart').getContext('2d');
        var revenueChart = new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: {{ revenue_dates|safe }},
                datasets: [{
                    label: 'الإيرادات',
                    data: {{ revenue_data|safe }},
                    backgroundColor: 'rgba(52, 152, 219, 0.2)',
                    borderColor: 'rgba(52, 152, 219, 1)',
                    borderWidth: 2,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        // رسم بياني للحضور
        var attendanceCtx = document.getElementById('attendanceChart').getContext('2d');
        var attendanceChart = new Chart(attendanceCtx, {
            type: 'bar',
            data: {
                labels: {{ attendance_dates|safe }},
                datasets: [{
                    label: 'الحضور',
                    data: {{ attendance_data|safe }},
                    backgroundColor: 'rgba(46, 204, 113, 0.2)',
                    borderColor: 'rgba(46, 204, 113, 1)',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>
```

### 3. صفحة الأعضاء

```html
<!-- صفحة قائمة الأعضاء -->
<div class="members-container">
    <div class="page-header">
        <h1>إدارة الأعضاء</h1>
        <div class="header-actions">
            <a href="/members/add" class="btn btn-primary"><i class="fas fa-plus"></i> إضافة عضو جديد</a>
            <button class="btn btn-secondary" id="exportBtn"><i class="fas fa-file-export"></i> تصدير</button>
            <button class="btn btn-secondary" id="printBtn"><i class="fas fa-print"></i> طباعة</button>
        </div>
    </div>
    
    <div class="filter-section">
        <div class="search-box">
            <input type="text" id="memberSearch" placeholder="بحث عن عضو...">
            <i class="fas fa-search"></i>
        </div>
        
        <div class="filters">
            <select id="statusFilter">
                <option value="all">جميع الحالات</option>
                <option value="active">نشط</option>
                <option value="inactive">غير نشط</option>
                <option value="frozen">مجمد</option>
            </select>
            
            <select id="subscriptionFilter">
                <option value="all">جميع الاشتراكات</option>
                <option value="active">اشتراك نشط</option>
                <option value="expired">اشتراك منتهي</option>
                <option value="none">بدون اشتراك</option>
            </select>
            
            <select id="genderFilter">
                <option value="all">جميع الأنواع</option>
                <option value="male">ذكر</option>
                <option value="female">أنثى</option>
            </select>
            
            <button id="resetFilters" class="btn btn-sm btn-outline">إعادة تعيين</button>
        </div>
    </div>
    
    <div class="members-table-container">
        <table class="data-table members-table">
            <thead>
                <tr>
                    <th>كود العضو</th>
                    <th>الاسم</th>
                    <th>رقم الهاتف</th>
                    <th>تاريخ الانضمام</th>
                    <th>حالة الاشتراك</th>
                    <th>تاريخ انتهاء الاشتراك</th>
                    <th>آخر حضور</th>
                    <th>الحالة</th>
                    <th>الإجراءات</th>
                </tr>
            </thead>
            <tbody>
                {% for member in members %}
                <tr data-member-id="{{ member.id }}">
                    <td>{{ member.member_code }}</td>
                    <td>
                        <div class="member-info">
                            {% if member.photo_path %}
                            <img src="{{ member.photo_path }}" alt="{{ member.first_name }}" class="member-avatar">
                            {% else %}
                            <div class="member-avatar-placeholder">{{ member.first_name[0] }}{{ member.last_name[0] }}</div>
                            {% endif %}
                            <span>{{ member.first_name }} {{ member.last_name }}</span>
                        </div>
                    </td>
                    <td>{{ member.phone }}</td>
                    <td>{{ member.join_date }}</td>
                    <td>
                        {% if member.has_active_subscription() %}
                        <span class="status active">نشط</span>
                        {% else %}
                        <span class="status inactive">غير نشط</span>
                        {% endif %}
                    </td>
                    <td>{{ member.get_subscription_end_date() or '-' }}</td>
                    <td>{{ member.get_last_attendance() or '-' }}</td>
                    <td>
                        <span class="status {{ member.active|lower }}">{{ 'نشط' if member.active else 'غير نشط' }}</span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a href="/members/{{ member.id }}" class="btn btn-sm btn-info" title="عرض"><i class="fas fa-eye"></i></a>
                            <a href="/members/{{ member.id }}/edit" class="btn btn-sm btn-primary" title="تعديل"><i class="fas fa-edit"></i></a>
                            <a href="/members/{{ member.id }}/card" class="btn btn-sm btn-secondary" title="طباعة الكارت"><i class="fas fa-id-card"></i></a>
                            <button class="btn btn-sm btn-danger delete-member" data-id="{{ member.id }}" title="حذف"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="pagination">
        <button class="btn btn-sm" id="prevPage" {% if not has_prev %}disabled{% endif %}><i class="fas fa-chevron-right"></i> السابق</button>
        <span class="page-info">صفحة {{ page }} من {{ total_pages }}</span>
        <button class="btn btn-sm" id="nextPage" {% if not has_next %}disabled{% endif %}>التالي <i class="fas fa-chevron-left"></i></button>
    </div>
</div>

<script>
    // تفعيل البحث والتصفية
    document.addEventListener('DOMContentLoaded', function() {
        const memberSearch = document.getElementById('memberSearch');
        const statusFilter = document.getElementById('statusFilter');
        const subscriptionFilter = document.getElementById('subscriptionFilter');
        const genderFilter = document.getElementById('genderFilter');
        const resetFilters = document.getElementById('resetFilters');
        
        // وظيفة البحث والتصفية
        function applyFilters() {
            const searchTerm = memberSearch.value.toLowerCase();
            const statusValue = statusFilter.value;
            const subscriptionValue = subscriptionFilter.value;
            const genderValue = genderFilter.value;
            
            // إرسال طلب AJAX للحصول على البيانات المصفاة
            fetch(`/api/members?search=${searchTerm}&status=${statusValue}&subscription=${subscriptionValue}&gender=${genderValue}&page=1`)
                .then(response => response.json())
                .then(data => {
                    // تحديث الجدول بالبيانات الجديدة
                    updateMembersTable(data.members);
                    updatePagination(data.page, data.total_pages, data.has_prev, data.has_next);
                })
                .catch(error => console.error('Error fetching filtered members:', error));
        }
        
        // تحديث جدول الأعضاء
        function updateMembersTable(members) {
            const tableBody = document.querySelector('.members-table tbody');
            tableBody.innerHTML = '';
            
            members.forEach(member => {
                // إنشاء صف جديد لكل عضو
                const row = document.createElement('tr');
                row.setAttribute('data-member-id', member.id);
                
                // إضافة محتوى الصف
                row.innerHTML = `
                    <td>${member.member_code}</td>
                    <td>
                        <div class="member-info">
                            ${member.photo_path ? 
                                `<img src="${member.photo_path}" alt="${member.first_name}" class="member-avatar">` : 
                                `<div class="member-avatar-placeholder">${member.first_name[0]}${member.last_name[0]}</div>`
                            }
                            <span>${member.first_name} ${member.last_name}</span>
                        </div>
                    </td>
                    <td>${member.phone}</td>
                    <td>${member.join_date}</td>
                    <td>
                        ${member.has_active_subscription ? 
                            '<span class="status active">نشط</span>' : 
                            '<span class="status inactive">غير نشط</span>'
                        }
                    </td>
                    <td>${member.subscription_end_date || '-'}</td>
                    <td>${member.last_attendance || '-'}</td>
                    <td>
                        <span class="status ${member.active ? 'active' : 'inactive'}">${member.active ? 'نشط' : 'غير نشط'}</span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a href="/members/${member.id}" class="btn btn-sm btn-info" title="عرض"><i class="fas fa-eye"></i></a>
                            <a href="/members/${member.id}/edit" class="btn btn-sm btn-primary" title="تعديل"><i class="fas fa-edit"></i></a>
                            <a href="/members/${member.id}/card" class="btn btn-sm btn-secondary" title="طباعة الكارت"><i class="fas fa-id-card"></i></a>
                            <button class="btn btn-sm btn-danger delete-member" data-id="${member.id}" title="حذف"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // إعادة تفعيل أزرار الحذف
            attachDeleteHandlers();
        }
        
        // تحديث أزرار التنقل بين الصفحات
        function updatePagination(page, totalPages, hasPrev, hasNext) {
            const pageInfo = document.querySelector('.page-info');
            const prevPageBtn = document.getElementById('prevPage');
            const nextPageBtn = document.getElementById('nextPage');
            
            pageInfo.textContent = `صفحة ${page} من ${totalPages}`;
            prevPageBtn.disabled = !hasPrev;
            nextPageBtn.disabled = !hasNext;
        }
        
        // تفعيل أحداث البحث والتصفية
        memberSearch.addEventListener('input', debounce(applyFilters, 300));
        statusFilter.addEventListener('change', applyFilters);
        subscriptionFilter.addEventListener('change', applyFilters);
        genderFilter.addEventListener('change', applyFilters);
        
        // إعادة تعيين التصفية
        resetFilters.addEventListener('click', function() {
            memberSearch.value = '';
            statusFilter.value = 'all';
            subscriptionFilter.value = 'all';
            genderFilter.value = 'all';
            applyFilters();
        });
        
        // تفعيل التنقل بين الصفحات
        document.getElementById('prevPage').addEventListener('click', function() {
            navigateToPage(parseInt(document.querySelector('.page-info').textContent.match(/\d+/)[0]) - 1);
        });
        
        document.getElementById('nextPage').addEventListener('click', function() {
            navigateToPage(parseInt(document.querySelector('.page-info').textContent.match(/\d+/)[0]) + 1);
        });
        
        function navigateToPage(page) {
            const searchTerm = memberSearch.value.toLowerCase();
            const statusValue = statusFilter.value;
            const subscriptionValue = subscriptionFilter.value;
            const genderValue = genderFilter.value;
            
            fetch(`/api/members?search=${searchTerm}&status=${statusValue}&subscription=${subscriptionValue}&gender=${genderValue}&page=${page}`)
                .then(response => response.json())
                .then(data => {
                    updateMembersTable(data.members);
                    updatePagination(data.page, data.total_pages, data.has_prev, data.has_next);
                })
                .catch(error => console.error('Error navigating to page:', error));
        }
        
        // تفعيل أزرار الحذف
        function attachDeleteHandlers() {
            document.querySelectorAll('.delete-member').forEach(button => {
                button.addEventListener('click', function() {
                    const memberId = this.getAttribute('data-id');
                    if (confirm('هل أنت متأكد من حذف هذا العضو؟')) {
                        fetch(`/api/members/${memberId}`, {
                            method: 'DELETE',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': getCsrfToken()
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                // إزالة الصف من الجدول
                                document.querySelector(`tr[data-member-id="${memberId}"]`).remove();
                                showNotification('تم حذف العضو بنجاح', 'success');
                            } else {
                                showNotification(data.message || 'حدث خطأ أثناء الحذف', 'error');
                            }
                        })
                        .catch(error => {
                            console.error('Error deleting member:', error);
                            showNotification('حدث خطأ أثناء الحذف', 'error');
                        });
                    }
                });
            });
        }
        
        // تفعيل أزرار الحذف عند تحميل الصفحة
        attachDeleteHandlers();
        
        // تفعيل زر التصدير
        document.getElementById('exportBtn').addEventListener('click', function() {
            const searchTerm = memberSearch.value.toLowerCase();
            const statusValue = statusFilter.value;
            const subscriptionValue = subscriptionFilter.value;
            const genderValue = genderFilter.value;
            
            window.location.href = `/api/members/export?search=${searchTerm}&status=${statusValue}&subscription=${subscriptionValue}&gender=${genderValue}`;
        });
        
        // تفعيل زر الطباعة
        document.getElementById('printBtn').addEventListener('click', function() {
            window.print();
        });
        
        // دالة مساعدة للتأخير
        function debounce(func, wait) {
            let timeout;
            return function() {
                const context = this, args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), wait);
            };
        }
        
        // دالة للحصول على رمز CSRF
        function getCsrfToken() {
            return document.querySelector('meta[name="csrf-token"]').getAttribute('content');
        }
        
        // دالة لعرض الإشعارات
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
                </div>
                <div class="notification-content">
                    <p>${message}</p>
                </div>
                <button class="notification-close"><i class="fas fa-times"></i></button>
            `;
            
            document.body.appendChild(notification);
            
            // إزالة الإشعار بعد 5 ثوانٍ
            setTimeout(() => {
                notification.classList.add('hide');
                setTimeout(() => notification.remove(), 300);
            }, 5000);
            
            // تفعيل زر الإغلاق
            notification.querySelector('.notification-close').addEventListener('click', function() {
                notification.classList.add('hide');
                setTimeout(() => notification.remove(), 300);
            });
        }
    });
</script>
```

## 🛠️ المكونات والأنماط المتقدمة

### 1. نظام الإشعارات

```css
/* أنماط نظام الإشعارات */
.notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background-color: white;
    max-width: 350px;
    z-index: 1000;
    animation: slideIn 0.3s ease-out forwards;
}

.notification.hide {
    animation: slideOut 0.3s ease-in forwards;
}

.notification.success {
    border-right: 4px solid #27ae60;
}

.notification.error {
    border-right: 4px solid #e74c3c;
}

.notification.warning {
    border-right: 4px solid #f39c12;
}

.notification.info {
    border-right: 4px solid #3498db;
}

.notification-icon {
    margin-left: 15px;
    font-size: 24px;
}

.notification.success .notification-icon {
    color: #27ae60;
}

.notification.error .notification-icon {
    color: #e74c3c;
}

.notification.warning .notification-icon {
    color: #f39c12;
}

.notification.info .notification-icon {
    color: #3498db;
}

.notification-content {
    flex: 1;
}

.notification-content p {
    margin: 0;
    font-size: 14px;
    color: #333;
}

.notification-close {
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    font-size: 16px;
    margin-right: 5px;
    padding: 0;
}

.notification-close:hover {
    color: #333;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* تعديل للغة العربية (RTL) */
html[dir="rtl"] .notification {
    right: auto;
    left: 20px;
    border-right: none;
    border-left: 4px solid;
}

html[dir="rtl"] @keyframes slideIn {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

html[dir="rtl"] @keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(-100%);
        opacity: 0;
    }
}
```

### 2. بطاقة العضوية

```html
<!-- بطاقة العضوية -->
<div class="membership-card">
    <div class="card-header">
        <div class="gym-logo">
            <img src="/static/images/logo.png" alt="Gymawy Logo">
        </div>
        <div class="gym-info">
            <h2>{{ gym_settings.gym_name }}</h2>
            <p>{{ gym_settings.gym_address }}</p>
            <p>{{ gym_settings.gym_phone }}</p>
        </div>
    </div>
    
    <div class="card-body">
        <div class="member-photo">
            {% if member.photo_path %}
            <img src="{{ member.photo_path }}" alt="{{ member.first_name }} {{ member.last_name }}">
            {% else %}
            <div class="photo-placeholder">{{ member.first_name[0] }}{{ member.last_name[0] }}</div>
            {% endif %}
        </div>
        
        <div class="member-details">
            <div class="detail-row">
                <span class="label">الاسم:</span>
                <span class="value">{{ member.first_name }} {{ member.last_name }}</span>
            </div>
            
            <div class="detail-row">
                <span class="label">كود العضوية:</span>
                <span class="value">{{ member.member_code }}</span>
            </div>
            
            <div class="detail-row">
                <span class="label">تاريخ الانضمام:</span>
                <span class="value">{{ member.join_date }}</span>
            </div>
            
            <div class="detail-row">
                <span class="label">نوع الاشتراك:</span>
                <span class="value">{{ member.get_active_subscription().plan.name if member.has_active_subscription() else 'غير مشترك' }}</span>
            </div>
            
            <div class="detail-row">
                <span class="label">تاريخ الانتهاء:</span>
                <span class="value">{{ member.get_subscription_end_date() or '-' }}</span>
            </div>
        </div>
    </div>
    
    <div class="card-footer">
        <div class="qr-code">
            <img src="{{ qr_code_url }}" alt="QR Code">
        </div>
        
        <div class="card-note">
            <p>هذه البطاقة شخصية ويجب إبرازها عند الدخول</p>
        </div>
    </div>
</div>
```

### 3. نموذج تسجيل الحضور

```html
<!-- نموذج تسجيل الحضور -->
<div class="check-in-container">
    <div class="check-in-header">
        <h2>تسجيل الحضور</h2>
        <div class="current-time">{{ current_time }}</div>
    </div>
    
    <div class="check-in-form">
        <div class="search-box">
            <input type="text" id="memberCodeInput" placeholder="أدخل كود العضو أو اسم العضو..." autofocus>
            <button id="searchBtn"><i class="fas fa-search"></i></button>
        </div>
        
        <div class="or-separator">
            <span>أو</span>
        </div>
        
        <div class="scan-qr">
            <button id="scanQrBtn" class="btn btn-primary btn-block">
                <i class="fas fa-qrcode"></i> مسح رمز QR
            </button>
        </div>
    </div>
    
    <div class="member-result" id="memberResult" style="display: none;">
        <div class="member-card">
            <div class="member-photo">
                <img id="memberPhoto" src="" alt="صورة العضو">
            </div>
            
            <div class="member-info">
                <h3 id="memberName"></h3>
                <p id="memberCode"></p>
                <p id="subscriptionStatus"></p>
                <p id="subscriptionEndDate"></p>
                <p id="remainingSessions"></p>
            </div>
        </div>
        
        <div class="check-in-actions">
            <button id="checkInBtn" class="btn btn-success btn-block">
                <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
            </button>
            
            <button id="checkOutBtn" class="btn btn-warning btn-block" style="display: none;">
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
            </button>
            
            <button id="cancelBtn" class="btn btn-outline btn-block">
                <i class="fas fa-times"></i> إلغاء
            </button>
        </div>
    </div>
    
    <div class="recent-check-ins">
        <h3>آخر عمليات تسجيل الدخول</h3>
        <div class="check-ins-list" id="recentCheckIns">
            {% for check_in in recent_check_ins %}
            <div class="check-in-item {{ 'check-out' if check_in.check_out_time else 'check-in' }}">
                <div class="check-in-time">
                    <i class="fas {{ 'fa-sign-out-alt' if check_in.check_out_time else 'fa-sign-in-alt' }}"></i>
                    <span>{{ check_in.check_in_time.strftime('%H:%M') }}</span>
                </div>
                
                <div class="check-in-member">
                    <div class="member-avatar">
                        {% if check_in.member.photo_path %}
                        <img src="{{ check_in.member.photo_path }}" alt="{{ check_in.member.first_name }}">
                        {% else %}
                        <div class="avatar-placeholder">{{ check_in.member.first_name[0] }}{{ check_in.member.last_name[0] }}</div>
                        {% endif %}
                    </div>
                    <div class="member-details">
                        <div class="member-name">{{ check_in.member.first_name }} {{ check_in.member.last_name }}</div>
                        <div class="member-subscription">{{ check_in.subscription.plan.name if check_in.subscription else 'بدون اشتراك' }}</div>
                    </div>
                </div>
                
                <div class="check-in-status">
                    <span class="status {{ 'success' if check_in.is_valid else 'warning' }}">
                        {{ 'صالح' if check_in.is_valid else 'غير صالح' }}
                    </span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="qr-scanner-modal" id="qrScannerModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>مسح رمز QR</h3>
            <button id="closeQrScannerBtn"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-body">
            <div id="qrScanner"></div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const memberCodeInput = document.getElementById('memberCodeInput');
        const searchBtn = document.getElementById('searchBtn');
        const scanQrBtn = document.getElementById('scanQrBtn');
        const memberResult = document.getElementById('memberResult');
        const memberPhoto = document.getElementById('memberPhoto');
        const memberName = document.getElementById('memberName');
        const memberCode = document.getElementById('memberCode');
        const subscriptionStatus = document.getElementById('subscriptionStatus');
        const subscriptionEndDate = document.getElementById('subscriptionEndDate');
        const remainingSessions = document.getElementById('remainingSessions');
        const checkInBtn = document.getElementById('checkInBtn');
        const checkOutBtn = document.getElementById('checkOutBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const qrScannerModal = document.getElementById('qrScannerModal');
        const closeQrScannerBtn = document.getElementById('closeQrScannerBtn');
        
        let currentMemberId = null;
        let hasActiveCheckIn = false;
        
        // البحث عن العضو
        function searchMember() {
            const searchTerm = memberCodeInput.value.trim();
            if (!searchTerm) return;
            
            fetch(`/api/members/search?term=${searchTerm}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.member) {
                        displayMember(data.member);
                    } else {
                        showNotification('لم يتم العثور على العضو', 'error');
                    }
                })
                .catch(error => {
                    console.error('Error searching for member:', error);
                    showNotification('حدث خطأ أثناء البحث', 'error');
                });
        }
        
        // عرض بيانات العضو
        function displayMember(member) {
            currentMemberId = member.id;
            
            // عرض بيانات العضو
            memberPhoto.src = member.photo_path || '/static/images/default-avatar.png';
            memberName.textContent = `${member.first_name} ${member.last_name}`;
            memberCode.textContent = `كود العضوية: ${member.member_code}`;
            
            // عرض حالة الاشتراك
            if (member.has_active_subscription) {
                subscriptionStatus.textContent = `الاشتراك: ${member.subscription_plan_name}`;
                subscriptionStatus.className = 'status-active';
            } else {
                subscriptionStatus.textContent = 'الاشتراك: غير نشط';
                subscriptionStatus.className = 'status-inactive';
            }
            
            // عرض تاريخ انتهاء الاشتراك
            subscriptionEndDate.textContent = `تاريخ الانتهاء: ${member.subscription_end_date || '-'}`;
            
            // عرض الحصص المتبقية
            if (member.subscription_type === 'sessions') {
                remainingSessions.textContent = `الحصص المتبقية: ${member.remaining_sessions}`;
                remainingSessions.style.display = 'block';
            } else {
                remainingSessions.style.display = 'none';
            }
            
            // التحقق من وجود تسجيل دخول نشط
            hasActiveCheckIn = member.has_active_check_in;
            if (hasActiveCheckIn) {
                checkInBtn.style.display = 'none';
                checkOutBtn.style.display = 'block';
            } else {
                checkInBtn.style.display = 'block';
                checkOutBtn.style.display = 'none';
            }
            
            // عرض نتيجة البحث
            memberResult.style.display = 'block';
            
            // مسح حقل البحث
            memberCodeInput.value = '';
        }
        
        // تسجيل الدخول
        function checkIn() {
            if (!currentMemberId) return;
            
            fetch('/api/attendance/check-in', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': getCsrfToken()
                },
                body: JSON.stringify({ member_id: currentMemberId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('تم تسجيل الدخول بنجاح', 'success');
                    updateRecentCheckIns();
                    resetForm();
                } else {
                    showNotification(data.message || 'حدث خطأ أثناء تسجيل الدخول', 'error');
                }
            })
            .catch(error => {
                console.error('Error checking in:', error);
                showNotification('حدث خطأ أثناء تسجيل الدخول', 'error');
            });
        }
        
        // تسجيل الخروج
        function checkOut() {
            if (!currentMemberId) return;
            
            fetch('/api/attendance/check-out', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': getCsrfToken()
                },
                body: JSON.stringify({ member_id: currentMemberId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('تم تسجيل الخروج بنجاح', 'success');
                    updateRecentCheckIns();
                    resetForm();
                } else {
                    showNotification(data.message || 'حدث خطأ أثناء تسجيل الخروج', 'error');
                }
            })
            .catch(error => {
                console.error('Error checking out:', error);
                showNotification('حدث خطأ أثناء تسجيل الخروج', 'error');
            });
        }
        
        // تحديث قائمة آخر عمليات تسجيل الدخول
        function updateRecentCheckIns() {
            fetch('/api/attendance/recent')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const recentCheckIns = document.getElementById('recentCheckIns');
                        recentCheckIns.innerHTML = '';
                        
                        data.check_ins.forEach(checkIn => {
                            const checkInItem = document.createElement('div');
                            checkInItem.className = `check-in-item ${checkIn.check_out_time ? 'check-out' : 'check-in'}`;
                            
                            checkInItem.innerHTML = `
                                <div class="check-in-time">
                                    <i class="fas ${checkIn.check_out_time ? 'fa-sign-out-alt' : 'fa-sign-in-alt'}"></i>
                                    <span>${formatTime(checkIn.check_in_time)}</span>
                                </div>
                                
                                <div class="check-in-member">
                                    <div class="member-avatar">
                                        ${checkIn.member.photo_path ? 
                                            `<img src="${checkIn.member.photo_path}" alt="${checkIn.member.first_name}">` : 
                                            `<div class="avatar-placeholder">${checkIn.member.first_name[0]}${checkIn.member.last_name[0]}</div>`
                                        }
                                    </div>
                                    <div class="member-details">
                                        <div class="member-name">${checkIn.member.first_name} ${checkIn.member.last_name}</div>
                                        <div class="member-subscription">${checkIn.subscription ? checkIn.subscription.plan.name : 'بدون اشتراك'}</div>
                                    </div>
                                </div>
                                
                                <div class="check-in-status">
                                    <span class="status ${checkIn.is_valid ? 'success' : 'warning'}">
                                        ${checkIn.is_valid ? 'صالح' : 'غير صالح'}
                                    </span>
                                </div>
                            `;
                            
                            recentCheckIns.appendChild(checkInItem);
                        });
                    }
                })
                .catch(error => console.error('Error updating recent check-ins:', error));
        }
        
        // إعادة تعيين النموذج
        function resetForm() {
            memberResult.style.display = 'none';
            currentMemberId = null;
            hasActiveCheckIn = false;
            memberCodeInput.value = '';
            memberCodeInput.focus();
        }
        
        // تنسيق الوقت
        function formatTime(timeString) {
            const date = new Date(timeString);
            return date.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });
        }
        
        // الحصول على رمز CSRF
        function getCsrfToken() {
            return document.querySelector('meta[name="csrf-token"]').getAttribute('content');
        }
        
        // تفعيل البحث
        searchBtn.addEventListener('click', searchMember);
        memberCodeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchMember();
            }
        });
        
        // تفعيل تسجيل الدخول والخروج
        checkInBtn.addEventListener('click', checkIn);
        checkOutBtn.addEventListener('click', checkOut);
        cancelBtn.addEventListener('click', resetForm);
        
        // تفعيل مسح رمز QR
        scanQrBtn.addEventListener('click', function() {
            qrScannerModal.style.display = 'flex';
            initQrScanner();
        });
        
        closeQrScannerBtn.addEventListener('click', function() {
            qrScannerModal.style.display = 'none';
            stopQrScanner();
        });
        
        // تهيئة ماسح رمز QR
        let qrScanner = null;
        
        function initQrScanner() {
            if (!qrScanner) {
                qrScanner = new QrScanner(
                    document.getElementById('qrScanner'),
                    result => {
                        qrScannerModal.style.display = 'none';
                        stopQrScanner();
                        
                        // استخراج معرف العضو من رمز QR
                        try {
                            const data = JSON.parse(result.data);
                            if (data.member_id) {
                                fetch(`/api/members/${data.member_id}`)
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.success && data.member) {
                                            displayMember(data.member);
                                        } else {
                                            showNotification('لم يتم العثور على العضو', 'error');
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error fetching member:', error);
                                        showNotification('حدث خطأ أثناء البحث', 'error');
                                    });
                            } else {
                                showNotification('رمز QR غير صالح', 'error');
                            }
                        } catch (error) {
                            console.error('Error parsing QR code:', error);
                            showNotification('رمز QR غير صالح', 'error');
                        }
                    },
                    { highlightScanRegion: true, highlightCodeOutline: true }
                );
            }
            
            qrScanner.start();
        }
        
        function stopQrScanner() {
            if (qrScanner) {
                qrScanner.stop();
            }
        }
        
        // تحديث الوقت الحالي
        function updateCurrentTime() {
            const currentTimeElement = document.querySelector('.current-time');
            const now = new Date();
            currentTimeElement.textContent = now.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }
        
        // تحديث الوقت كل ثانية
        setInterval(updateCurrentTime, 1000);
        updateCurrentTime();
        
        // تحديث قائمة آخر عمليات تسجيل الدخول كل 30 ثانية
        setInterval(updateRecentCheckIns, 30000);
    });
</script>
```

## 📱 تجربة المستخدم

### 1. التصميم المستجيب (Responsive Design)
- تكيف الواجهة مع مختلف أحجام الشاشات (الحواسيب، الأجهزة اللوحية، الهواتف الذكية)
- استخدام وحدات قياس نسبية (%, em, rem) بدلاً من الوحدات الثابتة (px)
- استخدام استعلامات الوسائط (Media Queries) لتخصيص العرض حسب حجم الشاشة

### 2. سهولة الاستخدام (Usability)
- تصميم بديهي وسهل الفهم
- تنظيم العناصر بشكل منطقي
- استخدام الألوان والأيقونات بشكل متسق
- توفير تغذية راجعة فورية للمستخدم

### 3. الوصول (Accessibility)
- دعم قارئات الشاشة
- تباين ألوان كافٍ
- إمكانية التنقل باستخدام لوحة المفاتيح
- نصوص بديلة للصور

### 4. الأداء (Performance)
- تحميل سريع للصفحات
- تحسين الصور والأصول
- تقليل طلبات HTTP
- استخدام التخزين المؤقت (Caching)

## 🔒 الأمان والصلاحيات

### 1. حماية النماذج
- استخدام رموز CSRF لحماية النماذج
- التحقق من صحة المدخلات على جانب العميل والخادم
- حماية من هجمات حقن SQL

### 2. إدارة الجلسات
- تشفير بيانات الجلسة
- انتهاء صلاحية الجلسة بعد فترة من عدم النشاط
- إمكانية تسجيل الخروج من جميع الأجهزة

### 3. التحكم في الوصول
- تحديد صلاحيات الوصول لكل صفحة وعملية
- إخفاء العناصر التي لا يملك المستخدم صلاحية الوصول إليها
- توجيه المستخدم إلى صفحة تسجيل الدخول عند محاولة الوصول إلى صفحة محمية

## 🚀 ميزات متقدمة

### 1. الرسوم البيانية والإحصائيات
- استخدام مكتبة Chart.js لعرض الرسوم البيانية
- رسوم بيانية تفاعلية
- تحديث البيانات في الوقت الفعلي

### 2. الطباعة والتصدير
- طباعة بطاقات العضوية
- تصدير البيانات إلى CSV وExcel وPDF
- تخصيص تنسيق الطباعة

### 3. البحث المتقدم
- بحث فوري أثناء الكتابة
- بحث متعدد المعايير
- اقتراحات البحث

### 4. التنبيهات والإشعارات
- إشعارات في الوقت الفعلي
- تنبيهات للمهام المهمة
- إشعارات قابلة للتخصيص

## 💡 أفضل الممارسات

### 1. تنظيم الكود
- فصل HTML وCSS وJavaScript
- استخدام نمط MVC (Model-View-Controller)
- تعليقات واضحة ومفيدة
- اتباع معايير تسمية متسقة

### 2. تحسين الأداء
- تقليل عدد طلبات HTTP
- ضغط الملفات
- تحسين الصور
- استخدام التخزين المؤقت

### 3. اختبار الواجهة
- اختبار التوافق مع المتصفحات المختلفة
- اختبار الاستجابة لمختلف أحجام الشاشات
- اختبار سهولة الاستخدام
- اختبار الأداء

## 🌐 الخلاصة

تم تصميم واجهات المستخدم في نظام إدارة النادي الرياضي بعناية فائقة لتوفير تجربة مستخدم متميزة وفعالة. يتميز النظام بواجهة عربية كاملة مع تصميم عصري وجذاب، ويدعم مختلف أحجام الشاشات والأجهزة. تم التركيز على سهولة الاستخدام والأداء والأمان، مع توفير ميزات متقدمة مثل الرسوم البيانية التفاعلية والإشعارات في الوقت الفعلي وإمكانيات الطباعة والتصدير المتقدمة.