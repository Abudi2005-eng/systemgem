# نظام خطط العضوية

## 🎯 نظرة عامة

نظام خطط العضوية هو المسؤول عن تعريف وإدارة أنواع الاشتراكات المختلفة التي يقدمها النادي الرياضي. يتيح هذا النظام للمدير إنشاء خطط متنوعة تناسب احتياجات الأعضاء المختلفة، مع تحديد الأسعار، المدة، عدد الحصص، وميزات كل خطة.

## 📋 الوظائف الرئيسية

### 1. إدارة خطط العضوية
- إنشاء خطط عضوية جديدة
- تعديل خطط العضوية الحالية
- تفعيل/تعطيل خطط العضوية
- أرشفة الخطط القديمة

### 2. تحديد خصائص الخطط
- تحديد اسم ووصف الخطة
- تحديد مدة الخطة (يوم، أسبوع، شهر، سنة)
- تحديد سعر الخطة
- تحديد عدد الحصص (غير محدود، أو عدد محدد)
- تحديد فترات الدخول المسموحة (رجال، سيدات، مختلط)

### 3. إدارة الخصومات والعروض
- إضافة خصومات على خطط محددة
- إنشاء عروض خاصة لفترات محددة
- تطبيق خصومات للمجموعات

### 4. ربط الخطط بالخدمات
- تحديد الخدمات المشمولة في كل خطة
- إضافة خدمات إضافية اختيارية
- تحديد أسعار الخدمات الإضافية

## 🗃️ نموذج بيانات خطة العضوية

```python
class MembershipPlan(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    description = db.Column(db.Text)
    duration_days = db.Column(db.Integer, nullable=False)
    price = db.Column(db.Float, nullable=False)
    sessions_count = db.Column(db.Integer, nullable=True)  # Null means unlimited
    time_restriction = db.Column(db.String(10), nullable=True)  # 'men', 'women', or None for no restriction
    active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # العلاقات
    subscriptions = db.relationship('Subscription', backref='plan', lazy=True)
    included_services = db.relationship('Service', secondary=plan_services, lazy='subquery',
        backref=db.backref('plans', lazy=True))
```

## 🔄 العلاقات مع الأنظمة الأخرى

### 1. العلاقة مع نظام الاشتراكات
- كل خطة عضوية يمكن استخدامها في عدة اشتراكات
- تحدد خطة العضوية سعر وخصائص الاشتراك
- يتم ربط الخطة بالاشتراك من خلال معرف الخطة

### 2. العلاقة مع نظام الخدمات
- كل خطة عضوية يمكن أن تشمل عدة خدمات
- يمكن إضافة خدمات إضافية للخطة
- يتم ربط الخطة بالخدمات من خلال جدول وسيط

### 3. العلاقة مع نظام الحضور
- تحدد خطة العضوية قواعد تسجيل الحضور
- تحدد عدد الحصص المسموح بها
- تحدد فترات الدخول المسموحة

## 📊 الإحصائيات والتقارير

### 1. إحصائيات الخطط
- عدد الاشتراكات النشطة لكل خطة
- إجمالي الإيرادات من كل خطة
- متوسط مدة الاشتراك لكل خطة

### 2. تقارير الخطط
- تقرير الخطط الأكثر مبيعاً
- تقرير الخطط حسب الفئة العمرية
- تقرير الخطط حسب الجنس

## 🖥️ واجهات المستخدم

### 1. صفحة قائمة الخطط
- عرض قائمة الخطط مع إمكانية التصفية والفرز
- خيارات للبحث عن الخطط
- أزرار للإجراءات السريعة (تعديل، حذف، تفعيل/تعطيل)

### 2. صفحة إضافة/تعديل خطة
- نموذج لإدخال بيانات الخطة
- خيارات لتحديد الخدمات المشمولة
- خيارات لتحديد الخصومات والعروض

### 3. صفحة تفاصيل الخطة
- عرض بيانات الخطة الكاملة
- عرض الخدمات المشمولة
- عرض الإحصائيات المتعلقة بالخطة

## 🛠️ الخدمات والوظائف المتقدمة

### 1. مقارنة الخطط
- إمكانية مقارنة خصائص الخطط المختلفة
- عرض الفروقات بين الخطط
- توصيات بالخطط المناسبة

### 2. حساب التكلفة
- حساب تكلفة الخطة مع الخدمات الإضافية
- حساب التكلفة بعد تطبيق الخصومات
- عرض التكلفة الإجمالية

### 3. تصميم الخطط
- إمكانية تصميم خطط مخصصة
- إمكانية نسخ خطة موجودة وتعديلها
- إمكانية إنشاء خطط موسمية

## 📱 تجربة المستخدم

- واجهة مستخدم سهلة الاستخدام
- عرض الخطط بطريقة جذابة
- إمكانية تصفية وفرز الخطط
- عرض المقارنات بشكل واضح

## 🔒 الأمان والصلاحيات

- تحديد صلاحيات إنشاء وتعديل الخطط
- تسجيل التغييرات على الخطط
- حماية بيانات الخطط من التعديل غير المصرح به

## 🚀 ميزات متقدمة

### 1. خطط مخصصة
- إمكانية إنشاء خطط مخصصة لأعضاء محددين
- إمكانية تطبيق خصومات خاصة
- إمكانية إضافة خدمات خاصة

### 2. خطط موسمية
- إمكانية إنشاء خطط لمواسم محددة
- تحديد تاريخ بداية ونهاية الخطة
- تطبيق أسعار خاصة للمواسم

### 3. خطط المجموعات
- إمكانية إنشاء خطط للمجموعات
- تحديد الحد الأدنى والأقصى لعدد الأعضاء
- تطبيق خصومات للمجموعات

## 💡 أفضل الممارسات

- إنشاء مجموعة متنوعة من الخطط لتلبية احتياجات مختلف الأعضاء
- تحديث الخطط بانتظام لتعكس التغييرات في الأسعار والخدمات
- مراقبة أداء الخطط وتعديلها بناءً على البيانات
- تقديم عروض خاصة وخصومات لزيادة المبيعات
- توفير معلومات واضحة وشاملة عن كل خطة