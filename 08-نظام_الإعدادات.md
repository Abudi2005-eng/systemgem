# Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø¥Ø¯Ø§Ø±Ø© ÙˆØªØ®ØµÙŠØµ Ù…Ø®ØªÙ„Ù Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ. ÙŠØªÙŠØ­ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆÙÙ‚Ù‹Ø§ Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø®Ø§ØµØ©ØŒ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©ØŒ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§ØªØŒ ÙˆØªØ®ØµÙŠØµ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.

## ğŸ“‹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ
- ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„)
- ØªØ­Ù…ÙŠÙ„ Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø§Ø¯ÙŠ
- ØªØ¹Ø¯ÙŠÙ„ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
- ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¹Ù…Ù„Ø© ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©

### 2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¬Ø¯Ø¯
- ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØ³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

### 3. ØªØ®ØµÙŠØµ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ù…Ø© ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù†
- ØªØ®ØµÙŠØµ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
- ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
- ØªØ®ØµÙŠØµ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ù‚ÙˆØ§Ø¦Ù…

### 4. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
- ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚ØµÙŠØ±Ø©
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©

## ğŸ—ƒï¸ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ (GymSettings)

```python
class GymSettings(db.Model):
    __tablename__ = 'gym_settings'
    
    id = db.Column(db.Integer, primary_key=True)
    gym_name = db.Column(db.String(100), nullable=False)
    gym_address = db.Column(db.Text)
    gym_phone = db.Column(db.String(20))
    gym_email = db.Column(db.String(100))
    gym_logo_path = db.Column(db.String(255))
    currency = db.Column(db.String(10), default='EGP')
    timezone = db.Column(db.String(50), default='Africa/Cairo')
    opening_time = db.Column(db.Time, default=time(6, 0))  # 6:00 AM
    closing_time = db.Column(db.Time, default=time(23, 0))  # 11:00 PM
    tax_rate = db.Column(db.Float, default=0)
    enable_sms = db.Column(db.Boolean, default=False)
    enable_email = db.Column(db.Boolean, default=False)
    enable_notifications = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    def __repr__(self):
        return f'<GymSettings {self.gym_name}>'
    
    @classmethod
    def get_settings(cls):
        """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ"""
        settings = cls.query.first()
        if not settings:
            # Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
            settings = cls(
                gym_name="Gymawy",
                gym_address="123 Main St, Cairo, Egypt",
                gym_phone="+201234567890",
                gym_email="info@gymawy.com"
            )
            db.session.add(settings)
            db.session.commit()
        return settings
```

### Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (User)

```python
class User(db.Model, UserMixin):
    __tablename__ = 'users'
    
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(50), unique=True, nullable=False)
    email = db.Column(db.String(100), unique=True, nullable=False)
    password_hash = db.Column(db.String(128))
    first_name = db.Column(db.String(50))
    last_name = db.Column(db.String(50))
    role_id = db.Column(db.Integer, db.ForeignKey('roles.id'))
    active = db.Column(db.Boolean, default=True)
    last_login = db.Column(db.DateTime)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
    role = db.relationship('Role', backref='users')
    
    def __repr__(self):
        return f'<User {self.username}>'
    
    def set_password(self, password):
        """ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø´ÙØ±Ø©"""
        self.password_hash = generate_password_hash(password)
    
    def check_password(self, password):
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"""
        return check_password_hash(self.password_hash, password)
    
    def has_permission(self, permission):
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"""
        if not self.role:
            return False
        return self.role.has_permission(permission)
```

### Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¯ÙˆØ± (Role)

```python
class Role(db.Model):
    __tablename__ = 'roles'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50), unique=True, nullable=False)
    description = db.Column(db.Text)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
    permissions = db.relationship('Permission', secondary='role_permissions', backref='roles')
    
    def __repr__(self):
        return f'<Role {self.name}>'
    
    def has_permission(self, permission_name):
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"""
        for permission in self.permissions:
            if permission.name == permission_name:
                return True
        return False
```

### Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Permission)

```python
class Permission(db.Model):
    __tablename__ = 'permissions'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50), unique=True, nullable=False)
    description = db.Column(db.Text)
    module = db.Column(db.String(50))  # Ø§Ù„Ù…Ø¯ÙŠÙˆÙ„ Ø£Ùˆ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø°ÙŠ ØªÙ†ØªÙ…ÙŠ Ø¥Ù„ÙŠÙ‡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    
    def __repr__(self):
        return f'<Permission {self.name}>'
```

### Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (RolePermission)

```python
role_permissions = db.Table('role_permissions',
    db.Column('role_id', db.Integer, db.ForeignKey('roles.id'), primary_key=True),
    db.Column('permission_id', db.Integer, db.ForeignKey('permissions.id'), primary_key=True)
)
```

### Ù†Ù…ÙˆØ°Ø¬ ØªØ®ØµÙŠØµ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UISettings)

```python
class UISettings(db.Model):
    __tablename__ = 'ui_settings'
    
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    theme = db.Column(db.String(20), default='light')  # light, dark
    primary_color = db.Column(db.String(20), default='blue')
    sidebar_collapsed = db.Column(db.Boolean, default=False)
    dashboard_widgets = db.Column(db.Text)  # JSON string of widget configuration
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
    user = db.relationship('User', backref='ui_settings')
    
    def __repr__(self):
        return f'<UISettings for {self.user.username}>'
```

## ğŸ”„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø£Ø®Ø±Ù‰

### 1. Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©
- ØªÙˆÙÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©
- Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
- ØªÙˆÙÙŠØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©

### 2. Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©

### 3. Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
- ØªÙƒÙˆÙŠÙ† Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØªØ®ØµÙŠØµÙ‡Ø§
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ÙƒÙ„ Ø¯ÙˆØ±
- ØªØ­Ø¯ÙŠØ¯ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±

## ğŸ–¥ï¸ ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

### 1. ØµÙØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ
- Ù†Ù…ÙˆØ°Ø¬ Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ
- ØªØ­Ù…ÙŠÙ„ Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø§Ø¯ÙŠ
- ØªØ¹Ø¯ÙŠÙ„ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
- ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¹Ù…Ù„Ø© ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©

### 2. ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### 3. ØµÙØ­Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
- Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
- ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„ÙƒÙ„ Ø¯ÙˆØ±

### 4. ØµÙØ­Ø© ØªØ®ØµÙŠØµ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ù…Ø© ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù†
- ØªØ®ØµÙŠØµ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
- ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª

### 5. ØµÙØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
- ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚ØµÙŠØ±Ø©
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©

## ğŸ› ï¸ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©

### 1. Ø¥Ø¯Ø§Ø±Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ

```python
def update_gym_settings(**kwargs):
    """ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø§Ø¯ÙŠ"""
    settings = GymSettings.get_settings()
    
    for key, value in kwargs.items():
        if hasattr(settings, key):
            setattr(settings, key, value)
    
    settings.updated_at = datetime.utcnow()
    db.session.commit()
    
    return settings

def upload_gym_logo(logo_file):
    """ØªØ­Ù…ÙŠÙ„ Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø§Ø¯ÙŠ"""
    if not logo_file:
        return None
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
    if not allowed_file(logo_file.filename, ['png', 'jpg', 'jpeg', 'svg']):
        raise ValueError("File type not allowed")
    
    # Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù
    filename = secure_filename(logo_file.filename)
    timestamp = int(time.time())
    new_filename = f"logo_{timestamp}_{filename}"
    file_path = os.path.join(current_app.config['UPLOAD_FOLDER'], 'logos', new_filename)
    
    # Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø¬Ù„Ø¯
    os.makedirs(os.path.dirname(file_path), exist_ok=True)
    
    # Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù
    logo_file.save(file_path)
    
    # ØªØ­Ø¯ÙŠØ« Ù…Ø³Ø§Ø± Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    relative_path = os.path.join('uploads', 'logos', new_filename)
    settings = GymSettings.get_settings()
    settings.gym_logo_path = relative_path
    db.session.commit()
    
    return relative_path
```

### 2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±

```python
def create_user(username, email, password, first_name, last_name, role_id):
    """Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"""
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†ÙØ³ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    existing_user = User.query.filter(
        (User.username == username) | (User.email == email)
    ).first()
    
    if existing_user:
        if existing_user.username == username:
            raise ValueError("Username already exists")
        else:
            raise ValueError("Email already exists")
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
    user = User(
        username=username,
        email=email,
        first_name=first_name,
        last_name=last_name,
        role_id=role_id
    )
    
    user.set_password(password)
    
    db.session.add(user)
    db.session.commit()
    
    return user

def update_user(user_id, **kwargs):
    """ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"""
    user = User.query.get(user_id)
    if not user:
        raise ValueError("User not found")
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    if 'username' in kwargs and kwargs['username'] != user.username:
        existing_user = User.query.filter_by(username=kwargs['username']).first()
        if existing_user:
            raise ValueError("Username already exists")
    
    if 'email' in kwargs and kwargs['email'] != user.email:
        existing_user = User.query.filter_by(email=kwargs['email']).first()
        if existing_user:
            raise ValueError("Email already exists")
    
    # ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ø°Ø§ ØªÙ… ØªÙˆÙÙŠØ±Ù‡Ø§
    if 'password' in kwargs:
        user.set_password(kwargs.pop('password'))
    
    # ØªØ­Ø¯ÙŠØ« Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    for key, value in kwargs.items():
        if hasattr(user, key):
            setattr(user, key, value)
    
    user.updated_at = datetime.utcnow()
    db.session.commit()
    
    return user

def create_role(name, description, permissions=None):
    """Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ± Ø¬Ø¯ÙŠØ¯"""
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¯ÙˆØ± Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù…
    existing_role = Role.query.filter_by(name=name).first()
    if existing_role:
        raise ValueError("Role already exists")
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯
    role = Role(
        name=name,
        description=description
    )
    
    db.session.add(role)
    
    # Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¥Ø°Ø§ ØªÙ… ØªÙˆÙÙŠØ±Ù‡Ø§
    if permissions:
        for permission_id in permissions:
            permission = Permission.query.get(permission_id)
            if permission:
                role.permissions.append(permission)
    
    db.session.commit()
    
    return role
```

### 3. Ø¥Ø¯Ø§Ø±Ø© ØªØ®ØµÙŠØµ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

```python
def get_or_create_ui_settings(user_id):
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¦Ù‡Ø§ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©"""
    ui_settings = UISettings.query.filter_by(user_id=user_id).first()
    
    if not ui_settings:
        ui_settings = UISettings(user_id=user_id)
        db.session.add(ui_settings)
        db.session.commit()
    
    return ui_settings

def update_ui_settings(user_id, **kwargs):
    """ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"""
    ui_settings = get_or_create_ui_settings(user_id)
    
    for key, value in kwargs.items():
        if hasattr(ui_settings, key):
            setattr(ui_settings, key, value)
    
    ui_settings.updated_at = datetime.utcnow()
    db.session.commit()
    
    return ui_settings

def update_dashboard_widgets(user_id, widgets):
    """ØªØ­Ø¯ÙŠØ« ØªØ±ØªÙŠØ¨ ÙˆØªÙƒÙˆÙŠÙ† Ø§Ù„ÙˆÙŠØ¯Ø¬Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª"""
    ui_settings = get_or_create_ui_settings(user_id)
    
    # ØªØ­ÙˆÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆÙŠØ¯Ø¬Øª Ø¥Ù„Ù‰ Ø³Ù„Ø³Ù„Ø© JSON
    widgets_json = json.dumps(widgets)
    
    ui_settings.dashboard_widgets = widgets_json
    ui_settings.updated_at = datetime.utcnow()
    db.session.commit()
    
    return ui_settings
```

## ğŸ“± ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

- ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
- ØªØ®ØµÙŠØµ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙÙ‚Ù‹Ø§ Ù„ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ù…Ø© ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù†
- Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ®ØµÙŠØµ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª

## ğŸ”’ Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

- ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- ØªØ³Ø¬ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù‚Ø¨Ù„ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª

## ğŸš€ Ù…ÙŠØ²Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©


 ØªØ®ØµÙŠØµ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
- Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø®ØµØµØ©
- ØªØ®ØµÙŠØµ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©

## ğŸ’¡ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª

- Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ù…
- ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ
- Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- Ø¥Ø¬Ø±Ø§Ø¡ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù…Ù†ØªØ¸Ù… Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
- ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…